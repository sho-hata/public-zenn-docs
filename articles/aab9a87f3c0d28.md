---
title: "Slackの送信前メッセージをサクっとその場で校正できるツールを作った"
emoji: "🧹"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: [slack, chrome]
published: true
---

## はじめに
Web版Slackで送信前メッセージを確認・編集し、オプションでLLMによる添削機能も使えるChrome拡張機能を作りました。

https://github.com/sho-hata/slack-patch-chrome-extension

ソースコード
https://github.com/sho-hata/slack-patch-chrome-extenstion

業務では、組織のセキュリティ／コンプライアンス要件に合わせて、使用できるAPI Keyを制限するなどの機能を組み込んだ社内ツールとして利用しています。一方で、これらの社内向け制約を取り除き、誰でも使える形にしたバージョンをパブリックに公開しました。

## 機能
## 送信前セルフチェック
Slackで メッセージを入力し、「Command + Enter」を押すと送信前にウィンドウが開きます。
![img](https://github.com/sho-hata/public-zenn-docs/blob/main/images/slack-extension/01_shortcut.png?raw=true)

ウィンドウの中で、文章をセルフチェック・添削できます。書き間違いや、タイポを落ち着いて修正できます。

「そのまま送信」ボタンを押すと送信します。
![img](https://github.com/sho-hata/public-zenn-docs/blob/main/images/slack-extension/02_check.png?raw=true)


## LLM校正
「校正する」ボタンもしくは Command + Enter を押すことで、LLM添削ウィンドウが開きます。左側が元のテキスト、右側が添削後のテキストです。添削後テキストはその場で編集できます。
![img](https://github.com/sho-hata/public-zenn-docs/blob/main/images/slack-extension/03_modal.png?raw=true)


## 校正指示
以下の2つの校正指示が用意されています。デフォルトではビジネス文書校正です。
- ビジネス文書校正
    - 丁寧かつ簡潔に校正します。
- カジュアル校正
    - 少し砕けた表現を使用しつつ、読みやすい文に校正します。

![img](https://github.com/sho-hata/public-zenn-docs/blob/main/images/slack-extension/04_preset_list.png?raw=true)

校正指示の適用は、切り替え可能です。
![img](https://github.com/sho-hata/public-zenn-docs/blob/main/images/slack-extension/06_preset_select.png?raw=true)

## 校正指示の編集
ブラウザの拡張機能アイコン -> 「オプション」から校正指示を追加・編集できます。

![img](https://github.com/sho-hata/public-zenn-docs/blob/main/images/slack-extension/05_preset_edit.png?raw=true)

## LLM 未使用モード
OpenAI API Keyを登録しなければ、LLM校正を使わない送信前セルフチェックモードになります。

![img](https://github.com/sho-hata/public-zenn-docs/blob/main/images/slack-extension/07_check_non_api.png?raw=true)

## コンセプト
### 前提
校正サポートであって、文書生成サポートではないです。

相手に伝えるべき内容を組み立てるのは人間です。

ふわっとした文章を入れても、体裁を整えただけのふわっとした文章が出来上がります。これはシステムプロンプト側でデータの補足や意味づけなどしないようになっています。

### 非同期チャットでの会話のプロトコル
人にはそれぞれ会話における暗黙のプロトコルがあると思っています。例えば以下のような。
- 敬語のレベル感
  - 絵文字の使用頻度とか
  - 簡潔 vs 詳細
  - ビジネス寄り vs カジュアル寄り

非同期チャットでは、こうしたプロトコルの差分が摩擦を生みやすいです。
特に業務コミュニケーションにおいては、本質的ではない部分に気を遣いすぎることで、やりとりの速度や率直さが損なわれることもあります。

個人的には、重要なトピックに関する会話であれば、配慮は必要だが遠慮は最小限にしたい気持ち。しかし、率直な表現を用いると摩擦が起きやすいのも事実です。送り手・受け取り手の双方に、一定水準の非同期コミュニケーションの技術がなければ、効率的なやりとりは成立しません。

受け取り手の技術や考え方を変えるのは難しいので、送り手として人に合わせたプロトコルに変換してもらうのが良いと思っています。ということで生まれたのがこのツール。自分のプロトコルで書いた文章を、相手や状況に応じて適切なプロトコルへ自然に変換する役割を、AIに担わせたいというコンセプトです。

ただし、現状の変換はまだ「テキストの静的解析」の域を出ていません。真に実用的なツールにするためには、人間関係の距離感や組織構造といった世界モデルを加味した出力が必要です。

例えば、[Adversarial Reasoning（敵対的推論）](https://www.latent.space/p/adversarial-reasoning)の考え方を取り入れて、「この表現を投げた際に相手がどう反応するか」というシミュレーションまで含めて言語化できるようになれば、コミュニケーションの精度は飛躍的に高まるはずです。

## おわりに
パッと思いついたときに、自分が欲しい形でソフトウェアとして出力できるようになったのはいい時代ですね。おそらく類似ツールはごまんとありますが、あえて気にせずその場でパッと作るのが Just in time Software の世界なのかなと思います。

