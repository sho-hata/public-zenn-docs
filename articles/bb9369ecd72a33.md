---
title: "GitHub Copilotの差分レビュー機能()を使ってみる"
emoji: "⚡️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [vscode, github copilot]
published: false
---

## はじめに

:::message
本記事は2024年10月時点の情報を元に書かれています。
:::

VSCodeのキーボードショートカットをいじっていると、GitHub Copilotの新機能が使えるようになっていることに気づきました。
https://x.com/sho_hata_/status/1846912014909952192


以下の2つの機能です。
- Github Copilot でステージされた変更をレビューする
- Github Copilot で変更をレビューする

`git add｀でステージした変更、もしくはステージに上げる前の変更をCopilotにレビューさせることができるようです。

VSCodeの開発イテレーションプランや直近のVSCodeのリリースノートを見ても、この機能についての情報は見当たらなかったので、β版というよりはまだα版のような感じでしょうか。

Developer Communityでは議論されているようでした。
https://t.co/A3shAVdFSf


## 使ってみる
[キーボードショートカット] -> [「GitHub Copilot: Review」]で検索すると、以下の2つのコマンドがヒットします。
![](/images/github-copilot-review/first.png)

適当なキーバインドを設定します。

以降、サンプルではGoのコードを使っています。

### バグを含んだコードの指摘
以下のような、エラーを返す関数を呼び出す箇所で、あえてerrを無視するコードを書いてみます。
```go
func igonreError() error{
	err := someErrorFunc()
	if err != nil {
		return nil
	}
}
```

この状態で、先ほど設定したキーバインドを押すと、分析中を示すポップアップが出てきます。画像は`git add`でステージした変更をレビューした場合です。
![](/images/github-copilot-review/thrid.png)

しばらくすると、バグを指摘する意図通りのコメントが出てきました。
![](/images/github-copilot-review/second.png)


### コードの改善提案、コードスタイルの指摘
```go
err := errors.New("error")
fmt.Println(err.Error())
```

上記のようなコードでは、`fmt.Println(err.Error())`の部分で、エラーを標準出力ではなく標準エラー出力に出力するべきだと指摘されました。
![](/images/github-copilot-review/four.png)

他にも、コードスタイルの指摘もされました。
![](/images/github-copilot-review/five.png)

## 複数ファイルが差分に含まれている場合
複数ファイルが差分に含まれていると、1つづつ順番にレビューが行われます。1ファイル内に複数の指摘事項が含まれている場合もあります。


## レビューされる内容
todo

## おわりに
